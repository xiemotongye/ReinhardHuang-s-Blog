---
layout: post
title: åˆè¯† python çˆ¬è™«
date: 2017-09-07 23:47:54.000000000 +08:00
tags: python
articleId: 20170907
---

## ä»€ä¹ˆæ˜¯ç½‘ç»œçˆ¬è™«
å¤§æ•°æ®æ—¶ä»£ï¼Œè·å¾—å®Œæ•´å…¨é¢çš„æ•°æ®ï¼Œæ˜¯ä»¶æå…¶é‡è¦å´å¹¶ä¸å®¹æ˜“çš„äº‹æƒ…ã€‚è¦çœŸæ­£åšå¥½å¤§æ•°æ®æ—¶ä»£çš„åˆ†æï¼Œå°±éœ€è¦å€ŸåŠ©çˆ¬è™«çš„åŠ›é‡ã€‚ 

>ç½‘ç»œçˆ¬è™«ï¼ˆåˆè¢«ç§°ä¸ºç½‘ç»œèœ˜è››ï¼Œç½‘ç»œæœºå™¨äººï¼‰ï¼Œæ˜¯ä¸€ç§æŒ‰ç…§ä¸€å®šçš„è§„åˆ™ï¼Œè‡ªåŠ¨åœ°æŠ“å–ä¸‡ç»´ç½‘ä¿¡æ¯çš„ç¨‹åºæˆ–è€…è„šæœ¬ã€‚

å¦‚æœæŠŠäº’è”ç½‘æ¯”å–»æˆä¸€ä¸ªèœ˜è››ç½‘ï¼Œé‚£ä¹ˆ **ç½‘ç»œçˆ¬è™«** å°±æ˜¯åœ¨ç½‘ä¸Šçˆ¬æ¥çˆ¬å»çš„èœ˜è››ã€‚**ç½‘ç»œçˆ¬è™«** é€šè¿‡ç½‘é¡µçš„é“¾æ¥åœ°å€æ¥å¯»æ‰¾ç½‘é¡µï¼Œä»ç½‘ç«™æŸä¸€ä¸ªé¡µé¢ï¼ˆé€šå¸¸æ˜¯é¦–é¡µï¼‰å¼€å§‹ï¼Œè¯»å–ç½‘é¡µçš„å†…å®¹ï¼Œæ‰¾åˆ°åœ¨ç½‘é¡µä¸­çš„å…¶å®ƒé“¾æ¥åœ°å€ï¼Œç„¶åé€šè¿‡è¿™äº›é“¾æ¥åœ°å€å¯»æ‰¾ä¸‹ä¸€ä¸ªç½‘é¡µï¼Œä¸€ç›´éå†ä¸‹å»ï¼Œç›´åˆ°æŠŠæ•´ä¸ªç½‘ç«™æ‰€æœ‰çš„ç½‘é¡µéƒ½æŠ“å–å®Œä¸ºæ­¢ã€‚ 

## ç½‘ç»œçˆ¬è™«çš„åˆæ³•æ€§

### ç½‘ç»œçˆ¬è™«å¼•å‘çš„é—®é¢˜

* æ€§èƒ½éªšæ‰°
* æ³•å¾‹é£é™©
* éšç§æ³„éœ²

#### ç½‘ç»œçˆ¬è™«çš„"æ€§èƒ½éªšæ‰°"
webæœåŠ¡å™¨é»˜è®¤æ¥å—äººç±»è®¿é—®ï¼Œå—é™äºç¼–å†™æ°´å¹³å’Œç›®çš„ï¼Œç½‘ç»œçˆ¬è™«å°†ä¼šä¸ºwebæœåŠ¡å™¨å¸¦æ¥å·¨å¤§çš„èµ„æºçš„å¼€é”€ã€‚
#### ç½‘ç»œçˆ¬è™«çš„æ³•å¾‹é£é™©
æœåŠ¡å™¨ä¸Šçš„æ•°æ®æœ‰äº§æƒå½’å±ï¼Œç½‘ç»œçˆ¬è™«è·å–æ•°æ®åç‰Ÿåˆ©å°†ä¼šå¸¦æ¥æ³•å¾‹çš„é£é™©ã€‚
#### ç½‘ç»œçˆ¬è™«çš„éšç§æ³„éœ²
ç½‘ç»œçˆ¬è™«å¯èƒ½å…·å¤‡çªç ´ç®€å•è®¿é—®çš„æ§åˆ¶èƒ½åŠ›ï¼Œè·å–è¢«ä¿æŠ¤çš„æ•°æ®ï¼Œä»è€Œæ³„éœ²ä¸ªäººéšç§ã€‚

æ— è®ºå¦‚ä½•ï¼Œå½“ä½ æŠ“å–æŸä¸ªç½‘ç«™çš„æ•°æ®æ—¶ï¼Œè¯·è®°ä½è‡ªå·±æ˜¯è¯¥ç½‘ç«™çš„è®¿å®¢ï¼Œåº”å½“çº¦æŸè‡ªå·±çš„æŠ“å–è¡Œä¸ºï¼Œå¦åˆ™ä»–ä»¬å¯èƒ½ä¼šå°ç¦ä½ çš„IPï¼Œç”šè‡³é‡‡å–æ›´è¿›ä¸€æ­¥çš„æ³•å¾‹è¡ŒåŠ¨ã€‚è¿™å°±è¦æ±‚ä¸‹è½½è¯·æ±‚çš„é€Ÿåº¦è¦é™å®šåœ¨ä¸€ä¸ªåˆç†å€¼ä¹‹å†…ï¼Œå¹¶ä¸”è¿˜éœ€è¦è®¾å®šä¸€ä¸ªä¸“å±çš„ç”¨æˆ·ä»£ç†æ¥æ ‡è¯†è‡ªå·±ã€‚

## Robotsåè®®
> Robotsåè®®ï¼ˆä¹Ÿç§°ä¸ºçˆ¬è™«åè®®ã€æœºå™¨äººåè®®ç­‰ï¼‰çš„å…¨ç§°æ˜¯â€œç½‘ç»œçˆ¬è™«æ’é™¤æ ‡å‡†â€ï¼ˆRobots Exclusion Protocolï¼‰ï¼Œç½‘ç«™é€šè¿‡Robotsåè®®å‘Šè¯‰æœç´¢å¼•æ“å“ªäº›é¡µé¢å¯ä»¥æŠ“å–ï¼Œå“ªäº›é¡µé¢ä¸èƒ½æŠ“å–ã€‚

æ ¹æ®åè®®ï¼Œç½‘ç«™ç®¡ç†å‘˜å¯ä»¥åœ¨ç½‘ç«™åŸŸåçš„æ ¹ç›®å½•ä¸‹æ”¾ä¸€ä¸ªrobots.txt æ–‡æœ¬æ–‡ä»¶ï¼Œé‡Œé¢å¯ä»¥æŒ‡å®šä¸åŒçš„ç½‘ç»œçˆ¬è™«èƒ½è®¿é—®çš„é¡µé¢å’Œç¦æ­¢è®¿é—®çš„é¡µé¢ï¼ŒæŒ‡å®šçš„é¡µé¢ç”±æ­£åˆ™è¡¨è¾¾å¼è¡¨ç¤ºã€‚ç½‘ç»œçˆ¬è™«åœ¨é‡‡é›†è¿™ä¸ªç½‘ç«™ä¹‹å‰ï¼Œé¦–å…ˆè·å–åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œç„¶åè§£æåˆ°å…¶ä¸­çš„è§„åˆ™ï¼Œç„¶åæ ¹æ®è§„åˆ™æ¥é‡‡é›†ç½‘ç«™çš„æ•°æ®ã€‚

æ³¨æ„ï¼Œè¿™ä¸ªåè®®çš„å­˜åœ¨æ›´å¤šçš„æ˜¯éœ€è¦ç½‘ç»œçˆ¬è™«å»éµå®ˆï¼Œè€Œèµ·ä¸åˆ°é˜²æ­¢çˆ¬è™«çš„åŠŸèƒ½ã€‚

### ä¸ºä»€ä¹ˆéœ€è¦Robotsåè®®
äº’è”ç½‘ä¸Šçš„ç½‘é¡µæ˜¯é€šè¿‡è¶…çº§é“¾æ¥äº’ç›¸å…³è”èµ·æ¥çš„ï¼Œä»è€Œå½¢æˆäº†ç½‘é¡µçš„ç½‘çŠ¶ç»“æ„ã€‚çˆ¬è™«çš„å·¥ä½œæ–¹å¼å°±åƒèœ˜è››åœ¨ç½‘ä¸Šæ²¿ç€é“¾æ¥çˆ¬æ¥çˆ¬å»ï¼Œæœ€åŸºæœ¬çš„æµç¨‹å¯ä»¥ç®€åŒ–å¦‚ä¸‹ï¼š

1. å–‚ç»™çˆ¬è™«ä¸€å †urlï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºç§å­(seeds)ï¼›
2. çˆ¬è™«æŠ“å–seedsï¼Œè§£æhtmlç½‘é¡µï¼ŒæŠ½å–å…¶ä¸­çš„è¶…çº§é“¾æ¥ï¼›
3. çˆ¬è™«æ¥ç€æŠ“å–è¿™äº›æ–°å‘ç°çš„é“¾æ¥æŒ‡å‘çš„ç½‘é¡µã€‚

æ­¥éª¤2å’Œæ­¥éª¤3å¾ªç¯å¾€å¤ã€‚

äº†è§£äº†ä¸Šé¢çš„æµç¨‹å°±èƒ½å‘ç°ï¼šå¯¹çˆ¬è™«æ¥è¯´ç½‘ç«™éå¸¸è¢«åŠ¨ï¼Œåªæœ‰è€è€å®å®è¢«æŠ“å–çš„ä»½ã€‚

æ‰€ä»¥ï¼Œå¯¹äºç½‘ç«™çš„ç®¡ç†è€…æ¥è¯´ï¼Œå°±å­˜åœ¨è¿™æ ·çš„éœ€æ±‚ï¼š

æŸäº›è·¯å¾„ä¸‹æ˜¯ä¸ªäººéšç§æˆ–è€…ç½‘ç«™ç®¡ç†ä½¿ç”¨ï¼Œä¸æƒ³è¢«æœç´¢å¼•æ“æŠ“å–ï¼Œæ¯”å¦‚è¯´æ—¥æœ¬çˆ±æƒ…åŠ¨ä½œç‰‡ï¼›
ä¸å–œæ¬¢æŸä¸ªæœç´¢å¼•æ“ï¼Œä¸æ„¿æ„è¢«ä»–æŠ“å–ï¼Œæœ€æœ‰åçš„å°±æ˜¯ä¹‹å‰æ·˜å®ä¸å¸Œæœ›è¢«ç™¾åº¦æŠ“å–ï¼›
å°ç½‘ç«™ä½¿ç”¨çš„æ˜¯å…¬ç”¨çš„è™šæ‹Ÿä¸»æœºï¼Œæµé‡æœ‰é™æˆ–è€…éœ€è¦ä»˜è´¹ï¼Œå¸Œæœ›æœç´¢å¼•æ“æŠ“çš„æ¸©æŸ”ç‚¹ï¼›
æŸäº›ç½‘é¡µæ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œæ²¡æœ‰ç›´æ¥çš„é“¾æ¥æŒ‡å‘ï¼Œä½†æ˜¯å¸Œæœ›å†…å®¹è¢«æœç´¢å¼•æ“æŠ“å–å’Œç´¢å¼•ã€‚

ç½‘ç«™å†…å®¹çš„æ‰€æœ‰è€…æ˜¯ç½‘ç«™ç®¡ç†å‘˜ï¼Œæœç´¢å¼•æ“åº”è¯¥å°Šé‡æ‰€æœ‰è€…çš„æ„æ„¿ï¼Œä¸ºäº†æ»¡è¶³ä»¥ä¸Šç­‰ç­‰ï¼Œå°±éœ€è¦æä¾›ä¸€ç§ç½‘ç«™å’Œçˆ¬è™«è¿›è¡Œæ²Ÿé€šçš„é€”å¾„ï¼Œç»™ç½‘ç«™ç®¡ç†å‘˜è¡¨è¾¾è‡ªå·±æ„æ„¿çš„æœºä¼šã€‚æœ‰éœ€æ±‚å°±æœ‰ä¾›åº”ï¼Œrobotsåè®®å°±æ­¤è¯ç”Ÿã€‚

### Robotså†™æ³•

æœ€ç®€å•çš„robots.txtåªæœ‰ä¸¤æ¡è§„åˆ™ï¼š

* User-agentï¼šæŒ‡å®šå¯¹å“ªäº›çˆ¬è™«ç”Ÿæ•ˆ
* Disallowï¼šä¸å…è®¸çˆ¬å–çš„ç›®å½•

å¦å¤–å¸¸è§çš„é™„åŠ è§„åˆ™ï¼š

* Crawl-delay: æŒ‡å®šçˆ¬è™«æŠ“å–çš„é—´éš”æ—¶é—´ï¼ˆç§’ï¼‰ã€‚è¿™ç§æ“ä½œå¯ä»¥è¿›è¡Œç¼“è§£æœåŠ¡å™¨å‹åŠ›ã€‚
* Sitemap: ç½‘ç«™åœ°å›¾ï¼Œæ ¼å¼ä¸ºXMLã€‚å…¶ä¸­åˆ—å‡ºç½‘ç«™ä¸­çš„ç½‘å€ä»¥åŠå…³äºæ¯ä¸ªç½‘å€çš„å…¶ä»–æ•°æ®(ä¸Šæ¬¡æ›´æ–°çš„æ—¶é—´ã€æ›´æ”¹çš„é¢‘ç‡ä»¥åŠç›¸å¯¹äºç½‘ç«™ä¸Šå…¶ä»–ç½‘å€çš„é‡è¦ç¨‹åº¦ç­‰ç­‰)ï¼Œåˆ©ç”¨è¿™äº›ä¿¡æ¯æœç´¢å¼•æ“å¯ä»¥æ›´åŠ æ™ºèƒ½åœ°æŠ“å–ç½‘ç«™å†…å®¹ã€‚
* Allow: å…è®¸çˆ¬å–çš„ç›®å½•ï¼Œä¸€èˆ¬å’ŒDisallowé…åˆä½¿ç”¨ã€‚

### ä¸¾ä¸ªğŸŒ°

çŸ¥ä¹çš„robotsæ–‡ä»¶: [https://www.zhihu.com/robots.txt](https://www.zhihu.com/robots.txt)

```
User-agent: *
Crawl-delay: 10

Disallow: /login
Disallow: /logout
Disallow: /resetpassword
Disallow: /terms
Disallow: /search
Disallow: /notifications
Disallow: /settings
Disallow: /inbox
Disallow: /admin_inbox
Disallow: /*?guide*
Disallow: /people/*-*-*-*
```

ç®€ä¹¦çš„robotsæ–‡ä»¶ï¼š[http://www.jianshu.com/robots.txt](http://www.jianshu.com/robots.txt)

```
# See http://www.robotstxt.org/wc/norobots.html for documentation on how to use the robots.txt file
#
# To ban all spiders from the entire site uncomment the next two lines:
User-agent: *
Disallow: /search
Disallow: /notes/
Disallow: /admin/
Disallow: /p/0826cf4692f9
Disallow: /p/d8b31d20a867
Disallow: /collections/*/recommended_authors
Disallow: /trial/*
Disallow: /mobile/campaign/fd2017/*
```

æ·˜å®çš„robotsæ–‡ä»¶ï¼š[https://www.taobao.com/robots.txt](https://www.taobao.com/robots.txt)

```
User-agent:  Baiduspider
Allow:  /article
Allow:  /oshtml
Allow:  /wenzhang
Disallow:  /product/
Disallow:  /

User-Agent:  Googlebot
Allow:  /article
Allow:  /oshtml
Allow:  /product
Allow:  /spu
Allow:  /dianpu
Allow:  /wenzhang
Allow:  /oversea
Disallow:  /

User-agent:  Bingbot
Allow:  /article
Allow:  /oshtml
Allow:  /product
Allow:  /spu
Allow:  /dianpu
Allow:  /wenzhang
Allow:  /oversea
Disallow:  /

User-Agent:  360Spider
Allow:  /article
Allow:  /oshtml
Allow:  /wenzhang
Disallow:  /

User-Agent:  Yisouspider
Allow:  /article
Allow:  /oshtml
Allow:  /wenzhang
Disallow:  /

User-Agent:  Sogouspider
Allow:  /article
Allow:  /oshtml
Allow:  /product
Allow:  /wenzhang
Disallow:  /

User-Agent:  Yahoo!  Slurp
Allow:  /product
Allow:  /spu
Allow:  /dianpu
Allow:  /wenzhang
Allow:  /oversea
Disallow:  /

User-Agent:  *
Disallow:  /
```

**Robotsåè®®ä¸æ˜¯ä»€ä¹ˆæŠ€æœ¯å£å’ï¼Œè€Œåªæ˜¯ä¸€ç§äº’ç›¸å°Šé‡çš„åè®®ã€‚Robotsåè®®æ˜¯å»ºè®®ä½†éçº¦æŸæ€§ï¼Œç½‘ç»œçˆ¬è™«å¯ä»¥ä¸éµå®ˆï¼Œä½†å­˜åœ¨æ³•å¾‹é£é™©ã€‚**

## ä¼°ç®—ç½‘ç«™å¤§å°
ç›®æ ‡ç½‘ç«™çš„å¤§å°ä¼šå½±å“æˆ‘ä»¬å¦‚ä½•è¿›è¡Œçˆ¬å–ã€‚å¦‚æœæ˜¯åªæœ‰å‡ ç™¾ä¸ªURLçš„ç½‘ç«™ï¼Œæ•ˆç‡å¹¶æ²¡æœ‰é‚£ä¹ˆé‡è¦ï¼›ä½†å¦‚æœæ˜¯æ‹¥æœ‰æ•°ç™¾ä¸‡ä¸ªç½‘é¡µçš„ç«™ç‚¹ï¼Œä½¿ç”¨ä¸²è¡Œä¸‹è½½å¯èƒ½éœ€è¦æŒç»­æ•°æœˆæ‰èƒ½å®Œæˆï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨åˆ†å¸ƒå¼ä¸‹è½½æ¥è§£å†³ã€‚

ä¼°ç®—ç½‘ç«™å¤§å°çš„ä¸€ä¸ªç®€ä¾¿æ–¹æ³•æ˜¯æ£€æŸ¥å…¶ä»–æœç´¢å¼•æ“çˆ¬è™«çš„ç»“æœã€‚å¯ä»¥é€šè¿‡siteå‚æ•°è·å–è¯¥ä¿¡æ¯ã€‚å¦‚åœ¨ Google ä¸­æœç´¢ site:jianshu.com

![](http://upload-images.jianshu.io/upload_images/2422746-dab25c6c0e3544fd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![](http://upload-images.jianshu.io/upload_images/2422746-145f15e734af7ab6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![](http://upload-images.jianshu.io/upload_images/2422746-8d4eca78217e87f8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

ä¸‰ä¸ªæœç´¢å¼•æ“æ˜¾ç¤ºç®€ä¹¦çš„ç½‘é¡µæ•°é‡éƒ½åœ¨ç™¾ä¸‡çº§ã€‚

åœ¨åŸŸååé¢æ·»åŠ URLè·¯å¾„å¯ä»¥å¯¹æœç´¢ç»“æœè¿›è¡Œè¿‡æ»¤ã€‚

## è¯†åˆ«ç½‘ç«™æ‰€ç”¨æŠ€æœ¯
æ„å»ºç½‘ç«™çš„æŠ€æœ¯ç±»å‹ä¹Ÿä¼šå¯¹æˆ‘ä»¬å¦‚ä½•çˆ¬å–äº§ç”Ÿå½±å“ã€‚ç½‘ç«™æ‰€ç”¨çš„æ¡†æ¶ï¼Œä»¥åŠ AngularJS ä¹‹ç±»çš„åŠ¨æ€åŠ è½½ï¼ŒASP.NET çš„ä¼šè¯ç®¡ç†å’Œè¡¨å•æäº¤éƒ½ä¼šå½±å“æˆ‘ä»¬çš„çˆ¬è™«ç­–ç•¥ã€‚

æœ‰ä¸€ä¸ªååˆ†æœ‰ç”¨çš„å·¥å…·å¯ä»¥æ£€æŸ¥ç½‘ç«™æ„å»ºçš„æŠ€æœ¯ç±»å‹â€”â€”builtwith æ¨¡å—ï¼ˆåªæ”¯æŒpython2ç¯å¢ƒï¼Œpython3ç¯å¢ƒæŠ¥é”™ï¼‰ã€‚

å®‰è£…builtwithä¹‹å‰ï¼Œéœ€è¦å®‰è£…pipã€‚

```
sudo easy_install pip
```
>pip æ˜¯ä¸€ä¸ªç°ä»£çš„ï¼Œé€šç”¨çš„ Python åŒ…ç®¡ç†å·¥å…·ã€‚æä¾›äº†å¯¹ Python åŒ…çš„æŸ¥æ‰¾ã€ä¸‹è½½ã€å®‰è£…ã€å¸è½½çš„åŠŸèƒ½ã€‚

pipä¹‹äºpythonç›¸å½“äºmavenä¹‹äºJavaï¼ŒCocoaPosä¹‹äºOCã€‚

pipå®‰è£…å®Œæˆåï¼Œå®‰è£…builtwithæ¨¡å—ã€‚

```
pip install builtwith
```

è¯¥æ¨¡å—å°† URL ä½œä¸ºå‚æ•°ï¼Œä¸‹è½½è¯¥ URL å¹¶å¯¹å…¶è¿›è¡Œåˆ†æï¼Œç„¶åè¿”å›è¯¥ç½‘ç«™ä½¿ç”¨çš„æŠ€æœ¯ã€‚

ä¸¾ä¸ªğŸŒ°ï¼š

![](http://upload-images.jianshu.io/upload_images/2422746-6fafe75fd329ad1b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## è¯†åˆ«ç½‘ç«™æ‰€æœ‰è€…

å¯¹äºä¸€äº›ç½‘ç«™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå…³å¿ƒå…¶æ‰€æœ‰è€…æ˜¯è°ã€‚ä¸ºäº†æ‰¾åˆ°ç½‘ç«™çš„æ‰€æœ‰è€…ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨WHOISåè®®æŸ¥è¯¢åŸŸåçš„æ³¨å†Œè€…æ˜¯è°ã€‚Pythonä¸­æœ‰ä¸€ä¸ªå¯¹è¯¥åè®®çš„å°è£…åº“ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡pipè¿›è¡Œå®‰è£…ã€‚

```
pip install python-whois
```

ä¸¾ä¸ªğŸŒ°ï¼š

![](http://upload-images.jianshu.io/upload_images/2422746-2c2a0136994177c6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## ç¼–å†™ç¬¬ä¸€ä¸ªpythonçˆ¬è™«

ä»æœ€ç®€å•çš„å¼€å§‹ï¼Œä½¿ç”¨æœ€å¥½ç”¨çš„ requests åšç½‘ç»œè®¿é—®ï¼Œå¹¶ä¸”ä½¿ç”¨æ“ä½œæ–¹ä¾¿çš„ beautifulsoup æ¥è§£æ htmlã€‚Python æ ‡å‡†åº“ä¸­è‡ªå¸¦äº† xml æ¨¡å—ï¼Œä½†æ˜¯æ€§èƒ½ä¸å¤Ÿå¥½ï¼Œè€Œä¸”ç¼ºä¹ä¸€äº›äººæ€§åŒ–çš„ APIï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œç¬¬ä¸‰æ–¹åº“ lxml å¢åŠ äº†å¾ˆå¤šå®ç”¨åŠŸèƒ½ï¼Œæ€§èƒ½ä¹Ÿæ›´é«˜ï¼Œå¯è°“çˆ¬è™«å¤„ç†ç½‘é¡µæ•°æ®çš„ä¸€ä»¶åˆ©å™¨ã€‚

```
pip install requests
pip install bs4
pip install lxml
```

æˆ‘ä»¬ç»ƒæ‰‹çš„é¡¹ç›®å°±æ˜¯çˆ¬å–ç®€ä¹¦æ–°ä¸Šæ¦œæ¨èæ–‡ç« çš„æ•°æ®ã€‚

```
#coding=utf-8
import requests
import time
from bs4 import BeautifulSoup

base_url = 'http://www.jianshu.com'
add_url = '/recommendations/notes'
num = 0
nowtime = time.time()

while(True):
    try:
        if num > 1000:
            break
        first_page = requests.request('get', base_url+ add_url).content
        soup = BeautifulSoup(first_page, "lxml")
        title_list = [i.get_text() for i in soup.select("a.title")]
        for i in title_list:
            num+=1
            print(num, '  ', i)
        try:
            nowtime = int(nowtime - 1800)
            add_url = '/recommendations/notes?category_id=56&max_id=' + str(nowtime)
        except:
            break
        time.sleep(10)
    except Exception as e:
        print(e)
        break
```

éå¸¸ç®€å•çš„ä»£ç ï¼Œéš¾ç‚¹åœ¨äºåˆ†é¡µã€‚

ç¨å¾®ç ”ç©¶äº†ä¸€ä¸‹ï¼Œæ‰“å¼€æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ï¼Œå‘ç°æ¯æ¬¡ç‚¹å‡»æ›´å¤šæŒ‰é’®ï¼Œnetwork å‘é€çš„è¯·æ±‚éƒ½å¸¦äº†ä¸€ä¸ª *max_id* å‚æ•°ã€‚è¿™é‡Œ *max_id* æ˜¾ç„¶æ˜¯ä¸€ä¸ª timestampï¼Œå¤šç‚¹å‡»å‡ æ¬¡åå‘ç°ï¼Œè¿™ä¸ª timestamp åŸºæœ¬ä¸Šæ˜¯ä»¥åŠå°æ—¶ä¸ºå•ä½é€’å‡çš„ã€‚äºæ˜¯é€šè¿‡æ¯æ¬¡æ”¹å˜ *max_id* æˆ‘ä»¬å®ç°äº†çˆ¬è™«çš„è‡ªåŠ¨åˆ†é¡µåŠŸèƒ½ã€‚

è¿™å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„çˆ¬è™«ï¼Œä¸€èˆ¬çœŸæ­£çš„çˆ¬è™«è¿˜éœ€è¦æ¶‰åŠæ•°æ®å­˜å‚¨ï¼Œè¿™ä¸ªå°±äº¤ç»™è¯»è€…ä»¬è‡ªå·±è§£å†³å§ã€‚

## å‚è€ƒ

* ã€Šç”¨ Python å†™ç½‘ç»œçˆ¬è™«ã€‹â€”â€” Richard Lawson è‘—ï¼Œææ–Œ è¯‘
* [çˆ¬è™«çš„"ç›—äº¦æœ‰é“"-Robotsåè®®](http://www.jianshu.com/p/d16076661d40)â€”â€” è‹¥ä¸
* [æ–°æ‰‹å‘çˆ¬è™«ï¼ˆä¸€ï¼‰åˆ©ç”¨å·¥å…·è½»æ¾çˆ¬å–ç®€ä¹¦å¹¶åˆ†æ](http://www.jianshu.com/p/be891e7e96e2) â€”â€” treelake